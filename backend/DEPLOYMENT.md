# Deploying to Render

This guide will help you deploy your Django backend to Render.

## Prerequisites

1. A Render account (free tier available)
2. Your code pushed to a Git repository (GitHub, GitLab, etc.)

## Deployment Steps

### 1. Connect Your Repository

1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click "New +" and select "Web Service"
3. Connect your Git repository
4. Select the repository containing your Django backend

### 2. Configure the Web Service

Use these settings:

- **Name**: `devmine-backend` (or your preferred name)
- **Environment**: `Python 3`
- **Build Command**: `./build.sh`
- **Start Command**: `gunicorn devmine_backend.wsgi:application`
- **Plan**: Free

### 3. Environment Variables

Add these environment variables in the Render dashboard:

```
PYTHON_VERSION=3.11.0
SECRET_KEY=<auto-generated>
DEBUG=false
ALLOWED_HOSTS=.onrender.com,devmine.com,www.devmine.com
DB_ENGINE=django.db.backends.postgresql
MAX_EMAILS_PER_IP=10
```

### 4. Database Configuration

1. Create a new PostgreSQL database in Render
2. Name it `devmine-db`
3. Render will automatically link the database environment variables

### 5. Alternative: Use render.yaml

You can also use the `render.yaml` file in the root directory for automatic deployment configuration.

## Local Development

For local development, create a `.env` file in the `backend/` directory:

```
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
DB_ENGINE=django.db.backends.sqlite3
DB_NAME=db.sqlite3
MAX_EMAILS_PER_IP=5
```

## Important Notes

- The `build.sh` script will automatically run migrations and collect static files
- Static files are served using WhiteNoise in production
- CORS is configured to allow your frontend domain
- The free tier has limitations but is sufficient for development/testing

## Troubleshooting

1. **Build fails**: Check that all dependencies are in `requirements.txt`
2. **Database connection**: Ensure PostgreSQL database is created and linked
3. **Static files**: The build script automatically collects static files
4. **CORS issues**: Update `CORS_ALLOWED_ORIGINS` in settings.py for your frontend domain 